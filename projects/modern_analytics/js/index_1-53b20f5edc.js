(function(){var t,e,r,a,n,i,s,c,l;e=new Vivus("svgTitle",{type:"delayed",duration:150,delay:100},function(){}),$("header").ready(function(){return $(this).stellar({positionProperty:"transform"})}),$("div.top").on("click",function(){return $.scrollTo("#top",300)}),n=800,a=150,r=20,i=d3.scale.linear().range([r/2,a-r/2]),c=d3.scale.linear().range([a-r/2,r/2]),s=d3.svg.axis().scale(i).orient("bottom").ticks(5),l=d3.svg.axis().scale(c).orient("left").ticks(5),t=d3.scale.category10(),d3.csv("assets/data/iris-9afa2a3429.csv",function(e,n){var o,d,u,f,p,h,x;if(e)throw e;p=function(e){var s;return s=d3.select(this),i.domain(u[e.x]),c.domain(u[e.y]),s.append("rect").attr("class","frame").attr("x",r/2).attr("y",r/2).attr("width",a-r).attr("height",a-r),s.selectAll("circle").data(n).enter().append("circle").attr("cx",function(t){return i(t[e.x])}).attr("cy",function(t){return c(t[e.y])}).attr("r",3).style("fill",function(e){return t(e.species)})},d=function(t,e){var r,a,n,i,s,c,l,o,d;for(r=[],l=t.length,c=e.length,a=i=0,o=l;o>=0?o>i:i>o;a=o>=0?++i:--i)for(n=s=0,d=c;d>=0?d>s:s>d;n=d>=0?++s:--s)r.push({x:t[a],i:a,y:e[n],j:n});return r},u={},x=d3.keys(n[0]).filter(function(t){return"species"!==t}),f=x.length,x.forEach(function(t){return u[t]=d3.extent(n,function(e){return e[t]})}),s.tickSize(a*f),l.tickSize(-a*f),h=d3.select("#plot").append("svg").attr("width",a*f+r).attr("height",a*f+r).append("g").attr("transform","translate("+r+","+r/2+")"),h.selectAll(".x.axis").data(x).enter().append("g").attr("class","x axis").attr("transform",function(t,e){return"translate("+(f-e-1)*a+",0)"}).each(function(t){return i.domain(u[t]),d3.select(this).call(s)}),h.selectAll(".y.axis").data(x).enter().append("g").attr("class","y axis").attr("transform",function(t,e){return"translate(0,"+e*a+")"}).each(function(t){return c.domain(u[t]),d3.select(this).call(l)}),o=h.selectAll(".cell").data(d(x,x)).enter().append("g").attr("class","cell").attr("transform",function(t){return"translate("+(f-t.i-1)*a+","+t.j*a+")"}).each(p),o.filter(function(t){return t.i===t.j}).append("text").attr("x",r).attr("y",r).attr("dy",".71em").text(function(t){return t.x}),d3.select(self.frameElement).style("height",a*f+r+20+"px")})}).call(this);